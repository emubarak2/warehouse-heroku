USE SYS;



CREATE TABLE FILE_NAME
(
id bigint NOT NULL AUTO_INCREMENT,
file_name VARCHAR(25),
PRIMARY KEY (id)
);

CREATE INDEX  ID_INDEX ON FILE_NAME (id);

CREATE TABLE DEALS_INVALID_RECORDS
(
id BIGINT NOT NULL AUTO_INCREMENT,
from_currency CHAR(3),
to_currency CHAR(3),
time_stamp DATETIME,
amount VARCHAR(24),
violation TEXT,

file_id BIGINT NOT NULL,
PRIMARY KEY (id),
CONSTRAINT DEALS_FILE_NAME_INVALID
	FOREIGN KEY (file_id)
	REFERENCES FILE_NAME(id)

);

CREATE TABLE DEALS_VALID_RECORDS
(
id BIGINT NOT NULL AUTO_INCREMENT,
from_currency CHAR(3) NOT NULL,
to_currency CHAR(3) NOT NULL,
time_stamp DATETIME NOT NULL,
amount DECIMAL(12.5) NOT NULL,
file_id BIGINT NOT NULL,
PRIMARY KEY (id),
CONSTRAINT DEALS_FILE_NAME_VALID
	FOREIGN KEY (file_id)
	REFERENCES FILE_NAME(id)

);


CREATE TABLE DEALS_COUNT
(
id int NOT NULL AUTO_INCREMENT,
from_currency VARCHAR(4),
count BIGINT NOT NULL,
PRIMARY KEY (id)
);


CREATE TABLE DEALS_CURRENCY_COUNT
(
id INT,
currency CHAR(3),
deals_count BIGINT
)
